import{r as f,l as P,T as U,A as $,z as q,o as c,c as N,w as T,a as x,f as u,b as t,d as _,t as o,h as k,v as S,g as h,F as j,x as L,u as m,n as b,L as R,O as E,K as J,p as G,i as H,C as Q}from"./app-0adca9c4.js";import{_ as W}from"./AuthenticatedLayout-895a8292.js";import{t as X}from"./AlertPlugins-965c12c8.js";import{M as Y}from"./ModalForm-11501589.js";import{_ as Z}from"./Pagination-2913a025.js";import{_ as tt}from"./_plugin-vue_export-helper-c27b6911.js";const e=p=>(G("data-v-37c4f2f2"),p=p(),H(),p),at={key:0,class:"col-12 col-lg-12 d-flex mx-auto"},st={class:"card radius-10 w-100"},et={class:"card-header bg-transparent d-flex justify-content-between align-items-center w-100"},ot={class:"title__page"},lt=["href"],it=e(()=>t("i",{class:"bi bi-arrow-left"},null,-1)),nt={class:"d-flex"},rt={class:"kategori"},dt=e(()=>t("span",{class:"title__categori"},"Dibuat Pada :",-1)),ct={class:"card-body"},ut={class:"row"},_t={class:"col-md-4"},mt={class:"card radius-10 shadow-none border mb-3 best-product-item"},ht={class:"card-body",style:{padding:"0.5rem 1rem 0rem 1rem"}},pt={class:"custom-label badge badge-flat bg-secondary cap"},vt={class:"frame__content"},ft={class:"frame__image"},bt=["src"],gt={class:"frame__info next_info"},yt={class:"framer--title"},kt=e(()=>t("i",{class:"bi bi-card-text"},null,-1)),St=e(()=>t("i",{class:"bi bi-upc"},null,-1)),wt={class:"info--data"},xt=e(()=>t("i",{class:"bi bi-tags"},null,-1)),jt={class:"frame__info next_payment"},Ct={class:"info--data"},Mt=e(()=>t("i",{class:"bi bi-cash"},null,-1)),qt={class:"info--data"},Nt=e(()=>t("i",{class:"bi bi-piggy-bank-fill"},null,-1)),Tt={class:"info--data"},Vt=e(()=>t("i",{class:"bi bi-cash-coin"},null,-1)),Bt=e(()=>t("b",null,"Deskripsi:",-1)),Dt={class:"col-md-8 content--stok"},zt={class:"frame__content frame--big"},It={class:"frame__info next_stok"},Ft={class:"info--data form-group btn-group"},Kt=e(()=>t("i",{class:"bi bi-search"},null,-1)),Ot=[Kt],At={class:"info--data btn-group"},Pt=e(()=>t("i",{class:"bi bi-cart-plus-fill",style:{"margin-right":"5px"}},null,-1)),Ut=e(()=>t("span",null,"Tambah Stok",-1)),$t={key:0,class:"info--data btn-group"},Lt=e(()=>t("i",{class:"bi bi-recycle",style:{"margin-right":"5px"}},null,-1)),Rt=e(()=>t("span",null,"Koreksi Stok",-1)),Et={class:"info--data info--title"},Jt={class:"framer--title"},Gt=e(()=>t("span",null,"Stok Masuk",-1)),Ht={class:"info--data info--title"},Qt={class:"framer--title"},Wt=e(()=>t("span",null,"Terjual",-1)),Xt={class:"info--data info--title"},Yt={class:"framer--title"},Zt=e(()=>t("span",null,"Total Stok",-1)),ta={class:"frame__content frame--small"},aa={class:"frame__info next_stok"},sa={class:"framer--title"},ea=e(()=>t("i",{class:"bi bi-cart-plus-fill",style:{"margin-right":"5px"}},null,-1)),oa={class:"text-muted text-10"},la={key:1,class:"info--data info--title"},ia=e(()=>t("div",{class:"framer--title"}," Tidak Ada Riwayat Stok ",-1)),na=[ia],ra={key:2,class:"d-flex align-items-center justify-content-center"},da={key:1,class:"col-12 col-lg-12 d-flex align-items-center justify-content-center mx-auto",style:{"min-height":"50vh"}},ca=e(()=>t("div",{class:"d-flex align-items-center justify-content-center w-100"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)),ua=[ca],_a={class:"row"},ma={class:"col-md-8"},ha={class:"form-group mb-3"},pa=e(()=>t("label",{class:"mb-2 cap"},"Harga modal",-1)),va={key:0,class:"invalid-feedback"},fa={class:"col-md-4"},ba={class:"form-group mb-3"},ga=e(()=>t("label",{class:"mb-2 cap"},"Stok Masuk",-1)),ya={key:0,class:"invalid-feedback"},ka={class:"col-md-8"},Sa={class:"form-group mb-3"},wa=e(()=>t("label",{class:"mb-2 cap"},"Status",-1)),xa={key:0,class:"invalid-feedback"},ja={class:"col-md-4"},Ca={class:"form-group mb-3"},Ma=e(()=>t("label",{class:"mb-2 cap"},"Jumlah",-1)),qa=["max"],Na={key:0,class:"invalid-feedback"},Ta={__name:"Show",props:{dataSource:{type:Object,default:()=>({})},perPage:{type:Number,default:1},routeName:{type:String,default:""},riwayatStok:{type:Object},statusStok:{type:Array,default:[]},statusPilih:{type:Array,default:[]}},emits:["closeModal"],setup(p){const d=p,v=f(!0),C=f(Math.random().toString(36).substring(2,15)),M=l=>{R.fire({title:"<h5>Detail</h5>",html:`<p style="text-align: left; font-size: 12px;">${l}</p>`,showCloseButton:!0,showConfirmButton:!1,showCancelButton:!1})},a=f(null);P(()=>{a.value=d.dataSource,v.value=!1;const l=new URLSearchParams(location.search);g.value=l.get("tanggal")});const g=f(""),V=()=>{E.get(`${route(d.routeName+".show",a.value.id)}?tanggal=${g.value}`)},B=async l=>{v.value=!0,await Q.get(route(d.routeName+".edit",l)).then(s=>{a.value=s.data,v.value=!1}).catch(s=>{console.log(s),v.value=!1})},n=U({redirectRoute:d.routeName+".index",qty:null,hargamodal:null,hargajual:null,barang_id:null,status:null}),w=()=>{n.reset(),J().props.errors={}},D=()=>{y.value=!1,C.value=z(),B(a.value.id)},z=()=>Math.random().toString(36).substring(2,15),y=f(!1),r=$({title:"Tambah Stok",mode:"create",icon:"",size:"modal-lg",type:"tambah",actionForm:null}),I=()=>{w(),n.hargajual=a.value.hargajual,n.barang_id=a.value.id,r.title="Tambah Stok",r.icon="bi bi-plus-circle",r.actionForm=route(d.routeName+".storeStok"),r.mode="create",r.type="tambah",y.value=!0,localStorage.removeItem("cart"),localStorage.removeItem("totalBayar")},F=()=>{if(w(),d.riwayatStok.total===0){X("warning","Tidak ada stok yang tersedia");return}n.hargamodal=d.riwayatStok.data[0].hargamodal,n.hargajual=a.value.hargajual,n.barang_id=a.value.id,r.title="Koreksi Stok",r.icon="bi bi-plus-circle",r.actionForm=route(d.routeName+".storeStokKoreksi"),r.mode="create",r.type="koreksi",y.value=!0,localStorage.removeItem("cart"),localStorage.removeItem("totalBayar")};return(l,s)=>{const K=q("loading-overlay"),O=q("v-select");return c(),N(W,null,{default:T(()=>[x(K,{active:v.value,"is-full-page":!0,loader:"bars",color:"#2E86C1"},null,8,["active"]),a.value?(c(),u("div",at,[t("div",st,[t("div",et,[t("h5",ot,[t("a",{href:l.route(d.routeName+".index"),class:"btn btn-sm btn-outline-primary ms-2"},[it,_(" Kembali ")],8,lt),_(" "+o(a.value.nama),1)]),t("div",nt,[t("div",rt,[dt,t("span",null,o(a.value.tanggal_dibuat),1)])])]),t("div",ct,[t("div",ut,[t("div",_t,[t("div",mt,[t("div",ht,[t("span",pt," Kategori: "+o(a.value.kategori.nama),1),t("div",vt,[t("div",ft,[t("img",{src:a.value.full_path,alt:"..."},null,8,bt)]),t("div",gt,[t("div",{class:"info--data info--title",onClick:s[0]||(s[0]=()=>M(a.value.nama))},[t("div",yt,[kt,_(" "+o(a.value.nama),1)])]),t("div",{class:"info--data",onClick:s[1]||(s[1]=()=>M(a.value.barcode))},[St,_(" "+o(a.value.barcode),1)]),t("div",wt,[xt,_(" "+o(a.value.merk),1)])]),t("div",jt,[t("div",Ct,[Mt,_(" Jual: "+o(a.value.rupiah_hargajual),1)]),t("div",qt,[Nt,_(" Diskon: "+o(a.value.total_diskon.diskon_rupiah)+" ("+o(a.value.diskon)+"%) ",1)]),t("div",Tt,[Vt,_(" Setelah Diskon: "+o(a.value.total_diskon.harga_setelah_diskon_rp),1)])])]),Bt,t("p",null,o(a.value.deskripsi),1)])])]),t("div",Dt,[t("div",zt,[t("div",It,[t("div",Ft,[k(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=i=>g.value=i),class:"form-control"},null,512),[[S,g.value]]),t("button",{class:"btn btn-md btn-primary",style:{"font-size":"14px"},type:"button",onClick:s[3]||(s[3]=()=>V())},Ot)]),t("div",At,[t("button",{class:"btn btn-primary d-flex justify-content-start align-items-center text-12",type:"button",onClick:s[4]||(s[4]=()=>I())},[Pt,_(),Ut])]),d.riwayatStok.total>0?(c(),u("div",$t,[t("button",{class:"btn btn-warning d-flex justify-content-start align-items-center text-12",type:"button",onClick:s[5]||(s[5]=()=>F())},[Lt,_(),Rt])])):h("",!0),t("div",Et,[t("div",Jt,[Gt,t("b",null,o(a.value.barang_stok_masuk),1)])]),t("div",Ht,[t("div",Qt,[Wt,t("b",null,o(a.value.barang_stok_terjual),1)])]),t("div",Xt,[t("div",Yt,[Zt,t("b",null,o(a.value.barang_stok_sisa),1)])])])]),t("div",ta,[t("div",aa,[d.riwayatStok.total>0?(c(!0),u(j,{key:0},L(d.riwayatStok.data,(i,A)=>(c(),u("div",{class:"info--data info--title",key:A},[t("div",sa,[ea,t("span",null,[_(o(i.qty)+" ",1),t("span",{class:b(`text-${i.riwayat_status.class}`)},o(i.riwayat_status.label),3),_(),t("span",oa,"("+o(i.tanggal_dibuat)+") Dibuat oleh "+o(i.created_by_user),1)])])]))),128)):(c(),u("div",la,na)),d.riwayatStok.total>10?(c(),u("div",ra,[x(Z,{links:d.riwayatStok.links},null,8,["links"])])):h("",!0)])])])])])])])):(c(),u("div",da,ua)),(c(),N(Y,{"modal-title":r.title,icon:r.icon,size:r.size,"data-form":m(n).data(),mode:r.mode,"action-form":r.actionForm,onReset:w,isOpen:y.value,onCloseModal:D,upload:!0,key:C.value},{default:T(()=>[t("div",_a,[r.type=="tambah"?(c(),u(j,{key:0},[t("div",ma,[t("div",ha,[pa,k(t("input",{"onUpdate:modelValue":s[6]||(s[6]=i=>m(n).hargamodal=i),type:"number",class:b(["form-control",{"is-invalid":l.errors.hargamodal}]),placeholder:"....."},null,2),[[S,m(n).hargamodal]]),l.errors.hargamodal?(c(),u("div",va,o(l.errors.hargamodal),1)):h("",!0)])]),t("div",fa,[t("div",ba,[ga,k(t("input",{"onUpdate:modelValue":s[7]||(s[7]=i=>m(n).qty=i),type:"number",class:b(["form-control",{"is-invalid":l.errors.qty}]),placeholder:"....."},null,2),[[S,m(n).qty]]),l.errors.qty?(c(),u("div",ya,o(l.errors.qty),1)):h("",!0)])])],64)):(c(),u(j,{key:1},[t("div",ka,[t("div",Sa,[wa,x(O,{modelValue:m(n).status,"onUpdate:modelValue":s[8]||(s[8]=i=>m(n).status=i),options:d.statusPilih,class:b({"is-invalid":l.errors.status}),label:"label",reduce:i=>i.id,placeholder:"Pilih Status"},null,8,["modelValue","options","class","reduce"]),l.errors.status?(c(),u("div",xa,o(l.errors.status),1)):h("",!0)])]),t("div",ja,[t("div",Ca,[Ma,k(t("input",{"onUpdate:modelValue":s[9]||(s[9]=i=>m(n).qty=i),type:"number",class:b(["form-control",{"is-invalid":l.errors.qty}]),placeholder:".....",max:m(n).status==="3"?a.value.barang_stok_sisa:null},null,10,qa),[[S,m(n).qty]]),l.errors.qty?(c(),u("div",Na,o(l.errors.qty),1)):h("",!0)])])],64))])]),_:1},8,["modal-title","icon","size","data-form","mode","action-form","isOpen"]))]),_:1})}}},Ka=tt(Ta,[["__scopeId","data-v-37c4f2f2"]]);export{Ka as default};
