import{M as j,r as _,A as w,j as k,k as S,o as s,c as L,w as z,f as o,b as t,n as i,J as E,e as I,d as c,t as g,y as r,g as u,N,O as v,K as V,p as H,i as D}from"./app-0adca9c4.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const b=e=>(H("data-v-49168127"),e=e(),D(),e),A={key:0,class:"modal-backdrop"},J=["id"],K={key:0,class:"modal-content"},U={class:"modal-title"},q={class:"modal-body p-4"},G={key:0,class:"modal-footer mb-1"},P=["disabled"],Q={key:0},R=b(()=>t("i",{class:"fas fa-circle-notch fa-spin"},null,-1)),W={key:1},X={key:0},Y={key:1},Z=b(()=>t("i",{class:"bi bi-save"},null,-1)),ee=["disabled"],te={key:0},se=b(()=>t("i",{class:"fas fa-circle-notch fa-spin"},null,-1)),oe={key:1},ae={key:0},le={key:1},de=b(()=>t("i",{class:"bi bi-save"},null,-1)),ne={key:3},ie={key:1,class:"modal-content"},ce={class:"modal-title"},re={class:"modal-body p-4"},ue={__name:"ModalForm",props:{errors:{type:Object,default:()=>({})},dataForm:{type:Object,default:()=>({})},modalTitle:{type:String,default:""},icon:{type:String,default:""},mode:{type:String,default:""},actionForm:{type:String,default:""},size:{type:String,default:""},classHeader:{type:String,default:""},upload:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},idModal:{type:String,default:""}},emits:["closeModal","reset"],setup(e,{emit:h}){const d=e,M=j(),f=a=>M[a]!==void 0,l=_(!1),F=_(!1),m=w({}),O=k(()=>d.dataForm),B=k(()=>d.isOpen);S(O,(a,y)=>{Object.assign(m,a)},{immediate:!0,deep:!0}),S(B,()=>{d.isOpen?$("body").addClass("modal-open"):$("body").removeClass("modal-open")});const C=()=>{d.actionForm&&(l.value=!0,v.post(d.actionForm,Object.assign(m,{_method:"post"}),{forceFormData:!0,preserveScroll:!0,onSuccess:a=>{h("closeModal"),n(),p(),l.value=!1,F.value=!1},onError:a=>{l.value=!1}}))},p=()=>{m.value={},V().props.errors={}},n=()=>{h("closeModal"),$("body").removeClass("modal-open"),$("#backdrop").remove()},T=async()=>{d.actionForm&&(l.value=!0,d.upload==!0?v.post(d.actionForm,Object.assign(m,{_method:"put"}),{preserveScroll:!0,onSuccess:()=>{n(),p(),l.value=!1},onError:a=>{l.value=!1}}):v.put(d.actionForm,m,{preserveScroll:!0,onSuccess:()=>{n(),p(),l.value=!1},onError:a=>{l.value=!1}}))};return(a,y)=>(s(),L(N,null,{default:z(()=>[e.isOpen?(s(),o("div",A,[t("div",{class:i(["modal fade",{show:e.isOpen}]),id:e.idModal?e.idModal:"create","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"","aria-labelledby":"createLabel","aria-hidden":"true",style:E([e.isOpen?{display:"block"}:{display:"none"}])},[t("div",{class:i(["modal-dialog",e.size])},[d.actionForm?(s(),o("div",K,[t("form",{onSubmit:y[0]||(y[0]=I(me=>e.mode=="create"?C():T(),["prevent"])),enctype:"multipart/form-data"},[t("div",{class:i(["modal-header",e.classHeader])},[t("h5",U,[t("i",{class:i([e.icon])},null,2),c(" "+g(e.modalTitle),1)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:n})],2),t("div",q,[r(a.$slots,"default",{},void 0,!0)]),d.actionForm?(s(),o("div",G,[e.mode=="create"?(s(),o("button",{key:0,disabled:l.value,type:"submit",class:"btn btn-primary"},[l.value?(s(),o("span",Q,[R,c(" Mohon Tunggu.. ")])):(s(),o("span",W,[f("buttonLabel")?(s(),o("div",X,[r(a.$slots,"buttonLabel",{},void 0,!0)])):(s(),o("div",Y,[Z,c(" Simpan ")]))]))],8,P)):u("",!0),e.mode=="edit"?(s(),o("button",{key:1,disabled:l.value,type:"submit",class:"btn btn-primary"},[l.value?(s(),o("span",te,[se,c(" Mohon Tunggu.. ")])):(s(),o("span",oe,[f("buttonLabel")?(s(),o("div",ae,[r(a.$slots,"buttonLabel",{},void 0,!0)])):(s(),o("div",le,[de,c(" Update ")]))]))],8,ee)):u("",!0),e.mode=="detail"?r(a.$slots,"customButton",{key:2},void 0,!0):u("",!0),f("customButton")?(s(),o("div",ne,[r(a.$slots,"customButton",{},void 0,!0)])):u("",!0),t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:n},"Batal")])):u("",!0)],32)])):(s(),o("div",ie,[t("div",{class:i(["modal-header",e.classHeader])},[t("h5",ce,[t("i",{class:i([e.icon])},null,2),c(" "+g(e.modalTitle),1)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:n})],2),t("div",re,[r(a.$slots,"default",{},void 0,!0)])]))],2)],14,J)])):u("",!0)]),_:3}))}},pe=x(ue,[["__scopeId","data-v-49168127"]]);export{pe as M};
