import{r as _,E as z,l as E,T as O,A as P,z as R,o as u,c as V,w as x,a as b,b as e,d as A,e as $,h as k,v as w,u as m,G as q,f as h,x as I,F as L,n as U,t as v,g as j,K as H,O as C}from"./app-c10c3e4b.js";import{_ as Y}from"./AuthenticatedLayout-26e8450e.js";import{M as G}from"./ModalForm-3dff2dca.js";import{_ as K}from"./Pagination-07c5cac2.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"col-12 col-lg-8 col-xl-8 d-flex"},Q={class:"card radius-10 w-100"},W={class:"card-header bg-transparent"},X={class:"row g-3 align-items-center"},Z=e("i",{class:"bi bi-plus-circle"},null,-1),ee={class:"col-12 col-lg-5 text-md-end"},te=["onSubmit"],ae={class:"input-group mb-1"},oe=e("button",{type:"submit",class:"btn btn-outline-secondary",id:"pencarian"},[e("i",{class:"bx bx-search"})],-1),se={class:"card-body"},ne={class:"table-responsive-sm"},le={class:"table table-bordered"},ie=e("thead",{class:"table-active"},[e("tr",null,[e("th",{width:"1%",class:"text-center"},"No"),e("th",{width:"",class:""},"Nama Role"),e("th",{width:"10%",class:"text-center"},"#")])],-1),ce={class:"text-center"},re={class:""},de={class:"text-center"},ue={class:"btn-group"},me=["onClick"],pe=e("i",{class:"bi bi-pencil"},null,-1),_e=[pe],be=["onClick"],he=e("i",{class:"bi bi-trash"},null,-1),ve=[he],fe={class:"row"},ge={class:"col-md-12"},ye={class:"form-group mb-3"},xe=e("label",{class:"mb-2"},"Nama Role",-1),ke={key:0,class:"invalid-feedback"},Se={__name:"Index",props:{dataSource:{type:Object,default:()=>({})},perPage:{type:Number,default:1},routeName:{type:String,default:""}},emits:["closeModal"],setup(r){const s=r,l=_(!1),f=z("$swal");E(()=>{const a=new URLSearchParams(location.search);i.value=a.get("query")});let i=_("");const N=()=>{C.get(route(s.routeName+".index",{query:i.value}))},c=O({redirectRoute:s.routeName+".index",name:null}),p=()=>{c.reset(),H().props.errors={}},D=()=>{d.value=!1},d=_(!1),t=P({title:"Tambah Data",mode:"create",icon:"",size:"modal-md",actionForm:null}),M=()=>{p(),t.mode="create",t.icon="bi bi-plus-circle",t.actionForm=route(s.routeName+".store"),d.value=!0},S=async a=>{l.value=!0,await axios.get(route(s.routeName+".edit",a)).then(o=>{c.name=o.data.name,l.value=!1}).catch(o=>{console.log(o),l.value=!1})},B=async a=>{p(),t.title="Edit Data",t.icon="bi bi-pencil-square",t.actionForm=route(s.routeName+".update",a),t.mode="edit",await S(a),d.value=!0},T=async a=>{f({title:"Apakah Anda Yakin?",text:"Ingin Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&(l.value=!0,C.delete(route(s.routeName+".destroy",a),{onSuccess:g=>{l.value=!1,f("Deleted!","Data Telah Dihapus","success")},preserveScroll:!0}))})};return(a,o)=>{const g=R("loading-overlay");return u(),V(Y,null,{default:x(()=>[b(g,{active:l.value,"is-full-page":!0,loader:"bars",color:"#2E86C1"},null,8,["active"]),e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("div",{class:"col-12 col-lg-7"},[e("button",{onClick:M,type:"button",class:"btn btn-sm btn-primary"},[Z,A(" Tambah ")])]),e("div",ee,[e("form",{onSubmit:$(N,["prevent"])},[e("div",ae,[k(e("input",{type:"text",class:"form-control",placeholder:"Pencarian...","aria-label":"Pencarian","aria-describedby":"pencarian","onUpdate:modelValue":o[0]||(o[0]=n=>q(i)?i.value=n:i=n)},null,512),[[w,m(i)]]),oe])],40,te)])])]),e("div",se,[e("div",ne,[e("table",le,[ie,e("tbody",null,[(u(!0),h(L,null,I(r.dataSource.data,(n,y)=>(u(),h("tr",{key:y},[e("td",ce,v(r.dataSource.current_page*s.perPage-s.perPage+y+1),1),e("td",re,[e("b",null,v(n.name),1)]),e("td",de,[e("div",ue,[e("a",{onClick:F=>B(n.id),class:"btn btn-sm btn-outline-dark","data-bs-toggle":"tooltip","data-placement":"top",title:"Edit Data"},_e,8,me),e("button",{onClick:F=>T(n.id),class:"btn btn-sm btn-outline-danger","data-bs-toggle":"tooltip","data-placement":"top",title:"Hapus Data"},ve,8,be)])])]))),128))])])]),b(K,{links:r.dataSource.links},null,8,["links"])])])]),b(G,{"modal-title":t.title,icon:t.icon,size:t.size,"data-form":m(c).data(),mode:t.mode,"action-form":t.actionForm,onReset:p,isOpen:d.value,onCloseModal:D},{default:x(()=>[e("div",fe,[e("div",ge,[e("div",ye,[xe,k(e("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>m(c).name=n),type:"text",class:U(["form-control",{"is-invalid":a.errors.name}]),placeholder:"....."},null,2),[[w,m(c).name]]),a.errors.name?(u(),h("div",ke,v(a.errors.name),1)):j("",!0)])])])]),_:1},8,["modal-title","icon","size","data-form","mode","action-form","isOpen"])]),_:1})}}};export{Se as default};
