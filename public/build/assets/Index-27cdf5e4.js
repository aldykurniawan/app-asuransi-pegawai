import{r as p,E as R,l as $,T as j,A as q,z as S,o as d,c as x,w as D,a as y,b as e,d as L,e as G,h as _,v as h,u as n,G as H,f as c,x as Y,F as K,n as b,t as i,g as v,K as J,O as P}from"./app-0adca9c4.js";import{_ as Q}from"./AuthenticatedLayout-895a8292.js";import{M as W}from"./ModalPreview-56652255.js";import{M as X}from"./ModalForm-11501589.js";import{_ as Z}from"./Pagination-2913a025.js";import"./_plugin-vue_export-helper-c27b6911.js";const ee={class:"mx-auto col-12 col-lg-12 d-flex"},te={class:"card radius-10 w-100"},se={class:"bg-transparent card-header"},ae={class:"row g-3 align-items-center"},oe={class:"col-12 col-lg-7"},le=e("i",{class:"bi bi-plus-circle"},null,-1),ne={class:"col-12 col-lg-5 text-md-end"},ie=["onSubmit"],re={class:"mb-1 input-group"},de=e("button",{type:"submit",class:"btn btn-outline-secondary",id:"pencarian"},[e("i",{class:"bx bx-search"})],-1),ce={class:"card-body"},ue={class:"table-responsive-sm"},me={class:"table table-bordered"},pe=e("thead",{class:"table-active"},[e("tr",null,[e("th",{width:"1%",class:"text-center"},"No"),e("th",{width:"",class:""},"Name"),e("th",{width:"",class:""},"Email"),e("th",{width:"",class:""},"Phone"),e("th",{width:"",class:""},"Address"),e("th",{width:"10%",class:"text-center"},"Aksi")])],-1),_e={class:"text-center"},he={style:{"vertical-align":"middle"},class:"text-center"},be={class:"btn-group"},ve=["onClick"],fe=e("i",{class:"bi bi-pencil"},null,-1),ge=[fe],ye=["onClick"],ke=e("i",{class:"bi bi-trash"},null,-1),we=[ke],Ce={class:"row"},Ne={class:"col-md-12"},Me={class:"mb-3 form-group"},Se=e("label",{class:"mb-2"},"Name",-1),xe={key:0,class:"invalid-feedback"},De={class:"col-md-12"},Pe={class:"mb-3 form-group"},Ve=e("label",{class:"mb-2"},"Email",-1),Be={key:0,class:"invalid-feedback"},Fe={class:"col-md-12"},Ee={class:"mb-3 form-group"},Ae=e("label",{class:"mb-2"},"Phone",-1),Te={key:0,class:"invalid-feedback"},ze={class:"col-md-12"},Ie={class:"mb-3 form-group"},Oe=e("label",{class:"mb-2"},"Address",-1),Ue={key:0,class:"invalid-feedback"},Re={class:"col-md-12"},$e={class:"mb-3 form-group"},je=e("label",{class:"mb-2"},"Insurance Policy",-1),qe={key:0,class:"invalid-feedback"},Qe={__name:"Index",props:{dataSource:{type:Object,default:()=>({})},dataInsurance:{type:Object,default:()=>({})},perPage:{type:Number,default:1},routeName:{type:String,default:""}},emits:["closeModal"],setup(f){const r=f,u=p(!1),w=R("$swal"),C=p(Math.random().toString(36).substring(2,15)),V=()=>Math.random().toString(36).substring(2,15);$(()=>{const t=new URLSearchParams(location.search);m.value=t.get("query")});let m=p("");const B=()=>{P.get(route(r.routeName+".index",{query:m.value}))},o=j({redirectRoute:r.routeName+".index",name:null,email:null,phone:null,address:null,insurance_policies_id:null}),k=()=>{o.reset(),J().props.errors={}},F=()=>{g.value=!1,C.value=V()},g=p(!1),l=q({title:"Tambah Data",mode:"create",icon:"",size:"modal-md",actionForm:null}),E=()=>{k(),l.title="Buat Data",l.icon="bi bi-plus-circle",l.actionForm=route(r.routeName+".store"),l.mode="create",g.value=!0},A=async t=>{u.value=!0,await axios.get(route(r.routeName+".edit",t)).then(s=>{o.name=s.data.name,o.email=s.data.email,o.phone=s.data.phone,o.address=s.data.address,o.insurance_policies_id=s.data.insurance_policies_id,u.value=!1}).catch(s=>{console.log(s),u.value=!1})},T=async t=>{k(),l.title="Edit Data",l.icon="bi bi-pencil-square",l.actionForm=route(r.routeName+".update",t),l.mode="edit",await A(t),g.value=!0},z=p(null),I=async t=>{w({title:"Apakah Anda Yakin?",text:"Ingin Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&(u.value=!0,P.delete(route(r.routeName+".destroy",t),{onSuccess:N=>{u.value=!1,w("Deleted!","Data Telah Dihapus","success")},preserveScroll:!0}))})};return(t,s)=>{const N=S("loading-overlay"),O=S("v-select");return d(),x(Q,null,{default:D(()=>[y(N,{active:u.value,"is-full-page":!0,loader:"bars",color:"#2E86C1"},null,8,["active"]),e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[e("button",{onClick:s[0]||(s[0]=()=>E()),type:"button",class:"btn btn-sm btn-primary"},[le,L(" Tambah ")])]),e("div",ne,[e("form",{onSubmit:G(B,["prevent"])},[e("div",re,[_(e("input",{type:"text",class:"form-control",placeholder:"Pencarian...","aria-label":"Pencarian","aria-describedby":"pencarian","onUpdate:modelValue":s[1]||(s[1]=a=>H(m)?m.value=a:m=a)},null,512),[[h,n(m)]]),de])],40,ie)])])]),e("div",ce,[e("div",ue,[e("table",me,[pe,e("tbody",null,[(d(!0),c(K,null,Y(f.dataSource.data,(a,M)=>(d(),c("tr",{key:M},[e("td",_e,i(f.dataSource.current_page*r.perPage-r.perPage+M+1),1),e("td",null,i(a.name),1),e("td",null,i(a.email),1),e("td",null,i(a.phone),1),e("td",null,i(a.address),1),e("td",he,[e("div",be,[e("button",{onClick:U=>T(a.id),class:"btn btn-sm btn-warning","data-bs-toggle":"tooltip","data-placement":"top",title:"Edit Data"},ge,8,ve),e("button",{onClick:U=>I(a.id),class:"btn btn-sm btn-danger","data-bs-toggle":"tooltip","data-placement":"top",title:"Hapus Data"},we,8,ye)])])]))),128))])])]),y(Z,{links:f.dataSource.links},null,8,["links"])])])]),y(W,{urlFile:z.value},null,8,["urlFile"]),(d(),x(X,{"modal-title":l.title,icon:l.icon,size:l.size,"data-form":n(o).data(),mode:l.mode,"action-form":l.actionForm,onReset:k,isOpen:g.value,onCloseModal:F,upload:!0,key:C.value},{default:D(()=>[e("div",Ce,[e("div",Ne,[e("div",Me,[Se,_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>n(o).name=a),type:"text",class:b(["form-control",{"is-invalid":t.errors.name}]),placeholder:"Name"},null,2),[[h,n(o).name]]),t.errors.name?(d(),c("div",xe,i(t.errors.name),1)):v("",!0)])]),e("div",De,[e("div",Pe,[Ve,_(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>n(o).email=a),type:"text",class:b(["form-control",{"is-invalid":t.errors.email}]),placeholder:"Email"},null,2),[[h,n(o).email]]),t.errors.email?(d(),c("div",Be,i(t.errors.email),1)):v("",!0)])]),e("div",Fe,[e("div",Ee,[Ae,_(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>n(o).phone=a),type:"text",class:b(["form-control",{"is-invalid":t.errors.phone}]),placeholder:"Phone"},null,2),[[h,n(o).phone]]),t.errors.phone?(d(),c("div",Te,i(t.errors.phone),1)):v("",!0)])]),e("div",ze,[e("div",Ie,[Oe,_(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=a=>n(o).address=a),type:"text",class:b(["form-control",{"is-invalid":t.errors.address}]),placeholder:"Address"},null,2),[[h,n(o).address]]),t.errors.address?(d(),c("div",Ue,i(t.errors.address),1)):v("",!0)])]),e("div",Re,[e("div",$e,[je,y(O,{modelValue:n(o).insurance_policies_id,"onUpdate:modelValue":s[6]||(s[6]=a=>n(o).insurance_policies_id=a),options:r.dataInsurance,reduce:a=>a.id,label:"policy_number",class:b({"is-invalid":t.errors.insurance_policies_id,capitalize:!0}),placeholder:"Select Insurance Policy"},null,8,["modelValue","options","reduce","class"]),t.errors.status?(d(),c("div",qe,i(t.errors.status),1)):v("",!0)])])])]),_:1},8,["modal-title","icon","size","data-form","mode","action-form","isOpen"]))]),_:1})}}};export{Qe as default};
