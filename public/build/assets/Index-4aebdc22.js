import{r as h,E as q,l as I,T as L,A as j,z as N,o as r,c as P,w as M,a as f,b as t,d as G,e as H,h as u,v as m,u as l,G as Y,f as d,x,F as K,n as p,t as i,g as _,K as J,O as V}from"./app-0adca9c4.js";import{_ as Q}from"./AuthenticatedLayout-895a8292.js";import{M as W}from"./ModalPreview-56652255.js";import{M as X}from"./ModalForm-11501589.js";import{_ as Z}from"./Pagination-2913a025.js";import"./_plugin-vue_export-helper-c27b6911.js";const tt={class:"mx-auto col-12 col-lg-12 d-flex"},et={class:"card radius-10 w-100"},ot={class:"bg-transparent card-header"},st={class:"row g-3 align-items-center"},at={class:"col-12 col-lg-7"},lt=t("i",{class:"bi bi-plus-circle"},null,-1),it={class:"col-12 col-lg-5 text-md-end"},nt=["onSubmit"],rt={class:"mb-1 input-group"},dt=t("button",{type:"submit",class:"btn btn-outline-secondary",id:"pencarian"},[t("i",{class:"bx bx-search"})],-1),ct={class:"card-body"},ut={class:"table-responsive-sm"},mt={class:"table table-bordered"},pt=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"1%",class:"text-center"},"No"),t("th",{width:"",class:""},"Policy Number"),t("th",{width:"",class:""},"Policy Type"),t("th",{width:"",class:""},"Start Date - End Date"),t("th",{width:"",class:""},"Coverage"),t("th",{width:"",class:""},"Premium"),t("th",{width:"",class:""},"Status"),t("th",{width:"",class:""},"Description"),t("th",{width:"10%",class:"text-center"},"Action")])],-1),_t={class:"text-center"},bt={style:{"vertical-align":"middle"},class:"text-center"},vt={class:"btn-group"},ht=["onClick"],yt=t("i",{class:"bi bi-pencil"},null,-1),gt=[yt],ft=["onClick"],kt=t("i",{class:"bi bi-trash"},null,-1),wt=[kt],Dt={class:"row"},St={class:"col-md-12"},Ct={class:"mb-3 form-group"},Nt=t("label",{class:"mb-2"},"Policy Number",-1),Pt={key:0,class:"invalid-feedback"},Mt={class:"col-md-12"},Vt={class:"mb-3 form-group"},Bt=t("label",{class:"mb-2"},"Policy Type",-1),Tt={key:0,class:"invalid-feedback"},Ft={class:"col-md-12"},Ut={class:"mb-3 form-group"},At=t("label",{class:"mb-2"},"Start Date",-1),Et={key:0,class:"invalid-feedback"},zt={class:"col-md-12"},Ot={class:"mb-3 form-group"},Rt=t("label",{class:"mb-2"},"End Date",-1),$t={key:0,class:"invalid-feedback"},qt={class:"col-md-12"},It={class:"mb-3 form-group"},Lt=t("label",{class:"mb-2"},"Coverage Amount",-1),jt={key:0,class:"invalid-feedback"},Gt={class:"col-md-12"},Ht={class:"mb-3 form-group"},Yt=t("label",{class:"mb-2"},"Premium Amount",-1),xt={key:0,class:"invalid-feedback"},Kt={class:"col-md-12"},Jt={class:"mb-3 form-group"},Qt=t("label",{class:"mb-2"},"Status",-1),Wt={key:0,class:"invalid-feedback"},Xt={class:"col-md-12"},Zt={class:"mb-3 form-group"},te=t("label",{class:"mb-2"},"Description",-1),ee={key:0,class:"invalid-feedback"},re={__name:"Index",props:{dataSource:{type:Object,default:()=>({})},perPage:{type:Number,default:1},routeName:{type:String,default:""}},emits:["closeModal"],setup(y){const c=y,b=h(!1),w=q("$swal"),D=h(Math.random().toString(36).substring(2,15)),B=()=>Math.random().toString(36).substring(2,15);I(()=>{const e=new URLSearchParams(location.search);v.value=e.get("query")});let v=h("");const T=()=>{V.get(route(c.routeName+".index",{query:v.value}))},a=L({redirectRoute:c.routeName+".index",policy_number:null,policy_type:null,start_date:null,end_date:null,coverage_amount:null,premium_amount:null,status:"active",description:null}),k=()=>{a.reset(),J().props.errors={}},F=()=>{g.value=!1,D.value=B()},g=h(!1),n=j({title:"Tambah Data",mode:"create",icon:"",size:"modal-md",actionForm:null}),U=()=>{k(),n.title="Buat Data",n.icon="bi bi-plus-circle",n.actionForm=route(c.routeName+".store"),n.mode="create",g.value=!0},A=async e=>{b.value=!0,await axios.get(route(c.routeName+".edit",e)).then(o=>{a.policy_number=o.data.policy_number,a.policy_type=o.data.policy_type,a.start_date=o.data.start_date,a.end_date=o.data.end_date,a.coverage_amount=o.data.coverage_amount,a.premium_amount=o.data.premium_amount,a.status=o.data.status,a.description=o.data.description,b.value=!1}).catch(o=>{console.log(o),b.value=!1})},E=async e=>{k(),n.title="Edit Data",n.icon="bi bi-pencil-square",n.actionForm=route(c.routeName+".update",e),n.mode="edit",await A(e),g.value=!0},z=h(null),O=async e=>{w({title:"Apakah Anda Yakin?",text:"Ingin Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&(b.value=!0,V.delete(route(c.routeName+".destroy",e),{onSuccess:S=>{b.value=!1,w("Deleted!","Data Telah Dihapus","success")},preserveScroll:!0}))})};return(e,o)=>{const S=N("loading-overlay"),R=N("v-select");return r(),P(Q,null,{default:M(()=>[f(S,{active:b.value,"is-full-page":!0,loader:"bars",color:"#2E86C1"},null,8,["active"]),t("div",tt,[t("div",et,[t("div",ot,[t("div",st,[t("div",at,[t("button",{onClick:o[0]||(o[0]=()=>U()),type:"button",class:"btn btn-sm btn-primary"},[lt,G(" Tambah ")])]),t("div",it,[t("form",{onSubmit:H(T,["prevent"])},[t("div",rt,[u(t("input",{type:"text",class:"form-control",placeholder:"Pencarian...","aria-label":"Pencarian","aria-describedby":"pencarian","onUpdate:modelValue":o[1]||(o[1]=s=>Y(v)?v.value=s:v=s)},null,512),[[m,l(v)]]),dt])],40,nt)])])]),t("div",ct,[t("div",ut,[t("table",mt,[pt,t("tbody",null,[(r(!0),d(K,null,x(y.dataSource.data,(s,C)=>(r(),d("tr",{key:C},[t("td",_t,i(y.dataSource.current_page*c.perPage-c.perPage+C+1),1),t("td",null,i(s.policy_number),1),t("td",null,i(s.policy_type),1),t("td",null,i(s.start_date)+" - "+i(s.end_date),1),t("td",null,i(s.coverage_amount),1),t("td",null,i(s.premium_amount),1),t("td",null,i(s.status),1),t("td",null,i(s.description),1),t("td",bt,[t("div",vt,[t("button",{onClick:$=>E(s.id),class:"btn btn-sm btn-warning","data-bs-toggle":"tooltip","data-placement":"top",title:"Edit Data"},gt,8,ht),t("button",{onClick:$=>O(s.id),class:"btn btn-sm btn-danger","data-bs-toggle":"tooltip","data-placement":"top",title:"Hapus Data"},wt,8,ft)])])]))),128))])])]),f(Z,{links:y.dataSource.links},null,8,["links"])])])]),f(W,{urlFile:z.value},null,8,["urlFile"]),(r(),P(X,{"modal-title":n.title,icon:n.icon,size:n.size,"data-form":l(a).data(),mode:n.mode,"action-form":n.actionForm,onReset:k,isOpen:g.value,onCloseModal:F,upload:!0,key:D.value},{default:M(()=>[t("div",Dt,[t("div",St,[t("div",Ct,[Nt,u(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l(a).policy_number=s),type:"text",class:p(["form-control",{"is-invalid":e.errors.policy_number}]),placeholder:"Policy Number"},null,2),[[m,l(a).policy_number]]),e.errors.policy_number?(r(),d("div",Pt,i(e.errors.policy_number),1)):_("",!0)])]),t("div",Mt,[t("div",Vt,[Bt,u(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>l(a).policy_type=s),type:"text",class:p(["form-control",{"is-invalid":e.errors.policy_type}]),placeholder:"Policy Type"},null,2),[[m,l(a).policy_type]]),e.errors.policy_type?(r(),d("div",Tt,i(e.errors.policy_type),1)):_("",!0)])]),t("div",Ft,[t("div",Ut,[At,u(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>l(a).start_date=s),type:"date",class:p(["form-control",{"is-invalid":e.errors.start_date}]),placeholder:"Start Date"},null,2),[[m,l(a).start_date]]),e.errors.start_date?(r(),d("div",Et,i(e.errors.start_date),1)):_("",!0)])]),t("div",zt,[t("div",Ot,[Rt,u(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>l(a).end_date=s),type:"date",class:p(["form-control",{"is-invalid":e.errors.end_date}]),placeholder:"End Date"},null,2),[[m,l(a).end_date]]),e.errors.end_date?(r(),d("div",$t,i(e.errors.end_date),1)):_("",!0)])]),t("div",qt,[t("div",It,[Lt,u(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>l(a).coverage_amount=s),type:"number",class:p(["form-control",{"is-invalid":e.errors.coverage_amount}]),placeholder:"Coverage Amount"},null,2),[[m,l(a).coverage_amount]]),e.errors.coverage_amount?(r(),d("div",jt,i(e.errors.coverage_amount),1)):_("",!0)])]),t("div",Gt,[t("div",Ht,[Yt,u(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>l(a).premium_amount=s),type:"number",class:p(["form-control",{"is-invalid":e.errors.premium_amount}]),placeholder:"Premium Amount"},null,2),[[m,l(a).premium_amount]]),e.errors.premium_amount?(r(),d("div",xt,i(e.errors.premium_amount),1)):_("",!0)])]),t("div",Kt,[t("div",Jt,[Qt,f(R,{modelValue:l(a).status,"onUpdate:modelValue":o[8]||(o[8]=s=>l(a).status=s),options:["active","inactive"],class:p({"is-invalid":e.errors.status,capitalize:!0}),placeholder:"Select Status"},null,8,["modelValue","class"]),e.errors.status?(r(),d("div",Wt,i(e.errors.status),1)):_("",!0)])]),t("div",Xt,[t("div",Zt,[te,u(t("textarea",{"onUpdate:modelValue":o[9]||(o[9]=s=>l(a).description=s),class:p(["form-control",{"is-invalid":e.errors.description}]),rows:"3",placeholder:"Description"},null,2),[[m,l(a).description]]),e.errors.description?(r(),d("div",ee,i(e.errors.description),1)):_("",!0)])])])]),_:1},8,["modal-title","icon","size","data-form","mode","action-form","isOpen"]))]),_:1})}}};export{re as default};
