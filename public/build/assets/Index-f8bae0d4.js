import{r as w,E as H,l as $,T as q,A as I,z as M,o as i,c as L,w as S,a as g,b as e,d as N,e as K,h as m,v as u,u as l,G as Y,f as d,x as U,F as D,n as p,t as n,g as h,K as G,O as B}from"./app-0adca9c4.js";import{_ as J}from"./AuthenticatedLayout-895a8292.js";import{M as Q}from"./ModalPreview-56652255.js";import{M as W}from"./ModalForm-11501589.js";import{_ as X}from"./Pagination-2913a025.js";import"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"col-12 col-lg-12 d-flex mx-auto"},ee={class:"card radius-10 w-100"},se={class:"card-header bg-transparent"},te={class:"row g-3 align-items-center"},oe=e("i",{class:"bi bi-plus-circle"},null,-1),ae={class:"col-12 col-lg-5 text-md-end"},le=["onSubmit"],ne={class:"input-group mb-1"},re=e("button",{type:"submit",class:"btn btn-outline-secondary",id:"pencarian"},[e("i",{class:"bx bx-search"})],-1),ie={class:"card-body"},de={class:"table-responsive-sm"},ce={class:"table table-bordered"},me=e("thead",{class:"table-active"},[e("tr",null,[e("th",{width:"1%",class:"text-center"},"No"),e("th",{width:"",class:""},"Nama"),e("th",{width:"",class:"text-center"},"Username"),e("th",{width:"16%",class:"text-center"},"Role"),e("th",{width:"10%",class:"text-center"},"#")])],-1),ue={class:"text-center"},pe={style:{"vertical-align":"middle"}},he={class:"text-muted mb-0"},be={class:"text-muted mb-0"},_e=e("i",{class:"bx bx-phone"},null,-1),ve={class:"text-center",style:{"vertical-align":"middle"}},fe={style:{"vertical-align":"middle"},class:"text-center"},ge={class:"d-flex flex-wrap gap-1 justify-content-center",style:{"max-width":"200px"}},ye=e("i",{class:"bx bx-flag"},null,-1),we={style:{"vertical-align":"middle"},class:"text-center"},ke={class:"btn-group"},xe=["onClick"],Ne=e("i",{class:"bi bi-pencil"},null,-1),Ce=[Ne],Ve=["onClick"],Me=e("i",{class:"bi bi-trash"},null,-1),Se=[Me],Ue={class:"row"},De={class:"form-group mb-2"},Be=e("label",{class:"mb-1"},"Role User",-1),Fe={key:0,class:"invalid-feedback"},Pe={class:"col-md-12"},Oe={class:"form-group mb-3"},Re=e("label",{class:"mb-2"},"Nama",-1),Te={key:0,class:"invalid-feedback"},Ee={class:"col-md-6"},ze={class:"form-group mb-3"},je=e("label",{class:"mb-2"},"Email",-1),Ae={key:0,class:"invalid-feedback"},He={class:"col-md-6"},$e={class:"form-group mb-3"},qe=e("label",{class:"mb-2"},"No Handphone",-1),Ie={key:0,class:"invalid-feedback"},Le={class:"col-md-12"},Ke={class:"form-group mb-3"},Ye=e("label",{class:"mb-2"},"Username",-1),Ge={key:0,class:"invalid-feedback"},Je={class:"col-md-12"},Qe={class:"form-group mb-3"},We=e("label",{class:"mb-2"},"Password",-1),Xe={key:0,class:"invalid-feedback"},Ze={class:"col-md-12"},es={class:"form-group mb-3"},ss=e("label",{class:"mb-2"},"Konfirmasi Password",-1),ts={key:0,class:"invalid-feedback"},ds={__name:"Index",props:{dataSource:{type:Object,default:()=>({})},perPage:{type:Number,default:1},routeName:{type:String,default:""},dataRole:{type:Object,default:()=>({})}},emits:["closeModal"],setup(f){const c=f,b=w(!1),C=H("$swal");$(()=>{const s=new URLSearchParams(location.search);_.value=s.get("query")});let _=w("");const F=()=>{B.get(route(c.routeName+".index",{query:_.value}))},a=q({redirectRoute:c.routeName+".index",role:[],permission:[],name:null,email:null,hp:null,username:null,password:null,password_confirmation:null}),k=()=>{a.reset(),G().props.errors={}},P=()=>{y.value=!1},y=w(!1),r=I({title:"Tambah Data",mode:"create",icon:"",size:"modal-md",actionForm:null}),O=()=>{k(),r.mode="create",r.icon="bi bi-plus-circle",r.actionForm=route(c.routeName+".store"),y.value=!0},R=async s=>{b.value=!0,await axios.get(route(c.routeName+".edit",s)).then(t=>{a.role=t.data.roles.map(v=>v.id),a.permission=t.data.permissions.map(v=>v.id),a.name=t.data.name,a.username=t.data.username,a.email=t.data.email,a.hp=t.data.hp,b.value=!1}).catch(t=>{console.log(t),b.value=!1})},T=async s=>{k(),r.title="Edit Data",r.icon="bi bi-pencil-square",r.actionForm=route(c.routeName+".update",s),r.mode="edit",await R(s),y.value=!0},E=w(null),z=async s=>{C({title:"Apakah Anda Yakin?",text:"Ingin Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&(b.value=!0,B.delete(route(c.routeName+".destroy",s),{onSuccess:v=>{b.value=!1,C("Deleted!","Data Telah Dihapus","success")},preserveScroll:!0}))})};return(s,t)=>{const v=M("loading-overlay"),j=M("v-select");return i(),L(J,null,{default:S(()=>[g(v,{active:b.value,"is-full-page":!0,loader:"bars",color:"#2E86C1"},null,8,["active"]),e("div",Z,[e("div",ee,[e("div",se,[e("div",te,[e("div",{class:"col-12 col-lg-7"},[e("button",{onClick:O,type:"button",class:"btn btn-sm btn-primary"},[oe,N(" Tambah ")])]),e("div",ae,[e("form",{onSubmit:K(F,["prevent"])},[e("div",ne,[m(e("input",{type:"text",class:"form-control",placeholder:"Pencarian...","aria-label":"Pencarian","aria-describedby":"pencarian","onUpdate:modelValue":t[0]||(t[0]=o=>Y(_)?_.value=o:_=o)},null,512),[[u,l(_)]]),re])],40,le)])])]),e("div",ie,[e("div",de,[e("table",ce,[me,e("tbody",null,[(i(!0),d(D,null,U(f.dataSource.data,(o,V)=>(i(),d("tr",{key:V},[e("td",ue,n(f.dataSource.current_page*c.perPage-c.perPage+V+1),1),e("td",pe,[e("b",null,n(o.name),1),e("p",he,n(o.email),1),e("p",be,[_e,N(" "+n(o.hp),1)])]),e("td",ve,[e("b",null,n(o.username),1)]),e("td",fe,[e("div",ge,[(i(!0),d(D,null,U(o.roles,(x,A)=>(i(),d("span",{key:A,class:"badge badge-flat bg-dark"},[ye,N(" "+n(x.name),1)]))),128))])]),e("td",we,[e("div",ke,[e("button",{onClick:x=>T(o.id),class:"btn btn-sm btn-warning","data-bs-toggle":"tooltip","data-placement":"top",title:"Edit Data"},Ce,8,xe),e("button",{onClick:x=>z(o.id),class:"btn btn-sm btn-danger","data-bs-toggle":"tooltip","data-placement":"top",title:"Hapus Data"},Se,8,Ve)])])]))),128))])])]),g(X,{links:f.dataSource.links},null,8,["links"])])])]),g(Q,{urlFile:E.value},null,8,["urlFile"]),g(W,{"modal-title":r.title,icon:r.icon,size:r.size,"data-form":l(a).data(),mode:r.mode,"action-form":r.actionForm,onReset:k,isOpen:y.value,onCloseModal:P,upload:!0},{default:S(()=>[e("div",Ue,[e("div",De,[Be,g(j,{modelValue:l(a).role,"onUpdate:modelValue":t[1]||(t[1]=o=>l(a).role=o),multiple:"",options:f.dataRole,reduce:o=>o.id,label:"name",class:p({"is-invalid rounded-3 border border-danger":s.errors.role}),placeholder:"Pilih",closeOnSelect:!1},null,8,["modelValue","options","reduce","class"]),s.errors.role?(i(),d("div",Fe,n(s.errors.role),1)):h("",!0)]),e("div",Pe,[e("div",Oe,[Re,m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(a).name=o),type:"text",class:p(["form-control",{"is-invalid":s.errors.name}]),placeholder:"....."},null,2),[[u,l(a).name]]),s.errors.name?(i(),d("div",Te,n(s.errors.name),1)):h("",!0)])]),e("div",Ee,[e("div",ze,[je,m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(a).email=o),type:"email",class:p(["form-control",{"is-invalid":s.errors.email}]),placeholder:"....."},null,2),[[u,l(a).email]]),s.errors.email?(i(),d("div",Ae,n(s.errors.email),1)):h("",!0)])]),e("div",He,[e("div",$e,[qe,m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(a).hp=o),type:"hp",class:p(["form-control",{"is-invalid":s.errors.hp}]),placeholder:"Nomor Handphone..."},null,2),[[u,l(a).hp]]),s.errors.hp?(i(),d("div",Ie,n(s.errors.hp),1)):h("",!0)])]),e("div",Le,[e("div",Ke,[Ye,m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l(a).username=o),type:"text",class:p(["form-control",{"is-invalid":s.errors.username}]),placeholder:"....."},null,2),[[u,l(a).username]]),s.errors.username?(i(),d("div",Ge,n(s.errors.username),1)):h("",!0)])]),e("div",Je,[e("div",Qe,[We,m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l(a).password=o),type:"text",class:p(["form-control",{"is-invalid":s.errors.password}]),placeholder:"....."},null,2),[[u,l(a).password]]),s.errors.password?(i(),d("div",Xe,n(s.errors.password),1)):h("",!0)])]),e("div",Ze,[e("div",es,[ss,m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l(a).password_confirmation=o),type:"text",class:p(["form-control",{"is-invalid":s.errors.password}]),placeholder:"....."},null,2),[[u,l(a).password_confirmation]]),s.errors.password?(i(),d("div",ts,n(s.errors.password),1)):h("",!0)])])])]),_:1},8,["modal-title","icon","size","data-form","mode","action-form","isOpen"])]),_:1})}}};export{ds as default};
